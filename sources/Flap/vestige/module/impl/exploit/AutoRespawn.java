package vestige.module.impl.exploit;

import java.util.concurrent.TimeUnit;
import net.minecraft.client.Minecraft;
import net.minecraft.network.play.client.C16PacketClientStatus;
import org.jetbrains.annotations.NotNull;
import vestige.Flap;
import vestige.event.Listener;
import vestige.event.impl.PacketReceiveEvent;
import vestige.module.Category;
import vestige.module.Module;
import vestige.setting.AbstractSetting;
import vestige.setting.impl.IntegerSetting;
import vestige.util.network.PacketUtil;

public class AutoRespawn extends Module {
   public IntegerSetting delay = new IntegerSetting("Delay (ms)", 0, 0, 100000, 1000);

   public AutoRespawn() {
      super("AutoRespawn", Category.ULTILITY);
      this.addSettings(new AbstractSetting[]{this.delay});
   }

   @Listener
   public void onReceive(@NotNull PacketReceiveEvent event) {
      if (event == null) {
         $$$reportNull$$$0(0);
      }

      if (Minecraft.getMinecraft().thePlayer.isDead) {
         Flap.getExecutor().schedule(() -> {
            PacketUtil.sendPacketNoEvent(new C16PacketClientStatus(C16PacketClientStatus.EnumState.PERFORM_RESPAWN));
         }, (long)this.delay.getValue(), TimeUnit.MILLISECONDS);
      }

   }

   // $FF: synthetic method
   private static void $$$reportNull$$$0(int var0) {
      throw new IllegalArgumentException(String.format("Argument for @NotNull parameter '%s' of %s.%s must not be null", "event", "vestige/module/impl/exploit/AutoRespawn", "onReceive"));
   }
}
