package vestige.module.impl.exploit;

import net.minecraft.network.play.server.S08PacketPlayerPosLook;
import org.jetbrains.annotations.NotNull;
import vestige.Flap;
import vestige.event.Listener;
import vestige.event.impl.PacketReceiveEvent;
import vestige.event.impl.UpdateEvent;
import vestige.event.impl.WorldChangeEvent;
import vestige.module.Category;
import vestige.module.Module;
import vestige.util.misc.LogUtil;
import vestige.util.player.PlayerUtil;

public class FlagDetector extends Module {
   public static short counter = 0;

   public FlagDetector() {
      super("FlagDetector", Category.ULTILITY);
   }

   @Listener
   public void onReceivePacket(@NotNull PacketReceiveEvent event) {
      if (event == null) {
         $$$reportNull$$$0(0);
      }

      if (event.getPacket() instanceof S08PacketPlayerPosLook && mc.thePlayer.ticksExisted > 40 && !((Disabler)Flap.instance.getModuleManager().getModule(Disabler.class)).isEnabled()) {
         ++counter;
         LogUtil.addChatMessage("&9&l[FLAP]&r Flag Detected:&l&c " + counter);
      }

   }

   @Listener
   public void onConnect(@NotNull WorldChangeEvent event) {
      if (event == null) {
         $$$reportNull$$$0(1);
      }

      counter = 0;
   }

   @Listener
   public void onUpdate(UpdateEvent event) {
      if (!PlayerUtil.nullCheck()) {
         counter = 0;
      }

   }

   public void onEnable() {
      counter = 0;
   }

   public boolean onDisable() {
      counter = 0;
      return false;
   }

   // $FF: synthetic method
   private static void $$$reportNull$$$0(int var0) {
      Object[] var10001 = new Object[]{"event", "vestige/module/impl/exploit/FlagDetector", null};
      switch(var0) {
      case 0:
      default:
         var10001[2] = "onReceivePacket";
         break;
      case 1:
         var10001[2] = "onConnect";
      }

      throw new IllegalArgumentException(String.format("Argument for @NotNull parameter '%s' of %s.%s must not be null", var10001));
   }
}
